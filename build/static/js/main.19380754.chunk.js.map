{"version":3,"sources":["index.js"],"names":["appSection","document","getElementById","socket","io","connect","reconnect","helperFunctions","isEnterButton","e","keyCode","isEnterCtrlButton","ctrlKey","isEmptyValue","val","numericEnding","number","one","two","five","n","Math","abs","parseTime","date","time","Date","getHours","slice","getMinutes","parseDate","messageDate","searchDate","compareDates","setDate","getDate","getMonth","getFullYear","date1","date2","LoginWindow","_this","this","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","className","type","id","onKeyUp","props","checkEnterKey","error","React","Component","LoginApp","state","value","target","replace","_this2","incorrectLogin","clearError","sendLogin","emit","user","existLogin","setErrorStateFun","setState","_this3","on","ChatContainer","usersList","uid","midEdit","message","messageEdited","mid","arguments","length","undefined","_this4","setEditMessage","users","Chat","editMessage","edditingMessage","UserTyping","MessageForm","UsersInfo","_this5","data","setUsers","userList","setUid","chatHistory","lastReadMessage","scrollToBottom","list","scrollTop","scrollHeight","_this6","history","_this7","Object","keys","map","i","userChanged","dateChanged","lastMessageUid","SystemMessage","MessageItem","userName","userColor","isEdditing","_this8","setHistory","chat","changeMessage","newMessage","messages","toMessage","_this9","unread","editting","messageClass","userMessageClass","style","color","linkifyjs_react__WEBPACK_IMPORTED_MODULE_10___default","tagName","onClick","count","_this11","key","_this12","setCount","text","_this14","join","isTyping","intervalStopTyping","keyPress","preventDefault","_this15","clearTimeout","setTimeout","stopTyping","event","nextProps","_this16","rows","onKeyDown","ref","onChange","handleChange","Audio","src","App","isUserSiggedIn","isWindowOnFocus","setUserStatus","_this17","setWindowFocus","readAll","_this18","play","window","addEventListener","ReactDOM","render"],"mappings":"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","file":"static/js/main.19380754.chunk.js","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './style.css';\nimport './reset.css';\nimport io from 'socket.io-client';\nimport Linkify from 'linkifyjs/react';\n\nconst appSection = document.getElementById('chatApp')\nconst socket = io.connect('http://localhost:5000/', {reconnect: true});\n//window.location.hostname\n\nconst helperFunctions = {\n\tisEnterButton : (e) => {\n\t\treturn (e.keyCode === 13) ? true : false;\n\t},\n\tisEnterCtrlButton : (e) => {\n\t\treturn ((e.keyCode === 10 || e.keyCode === 13) && e.ctrlKey) ? true : false;\n\t},\n\tisEmptyValue : (val) => {\n\t\treturn (val === '') ? true : false\n\t},\n\tnumericEnding : (number, one, two, five) => {\n\t    let n = Math.abs(number);\n\t    n %= 100;\n\t    if (n >= 5 && n <= 20) {\n\t    \treturn five;\n\t    }\n\t    n %= 10;\n\t    if (n === 1) {\n\t    \treturn one;\n\t    }\n\t    if (n >= 2 && n <= 4) {\n\t    \treturn two;\n\t    }\n\t    return five;\n\t},\n\tparseTime : (date) => {\n\t\tvar time = new Date(date);\n\t\treturn (\"0\" + time.getHours()).slice(-2)   + \":\" +  (\"0\" + time.getMinutes()).slice(-2) + \":\" ;\n\t},\n\tparseDate : (date) => {\n\t\tvar messageDate = new Date(date);\n\t\tvar searchDate = new Date();\n\t\tif(helperFunctions.compareDates(messageDate, searchDate))\n\t\t\treturn \"Сегодня\";\n\t\tsearchDate.setDate(searchDate.getDate()-1);\n\t\tif(helperFunctions.compareDates(messageDate, searchDate))\n\t\t\treturn \"Вчера\";\n\t\treturn messageDate.getDate()+'.'+messageDate.getMonth()+'.'+messageDate.getFullYear();\n\t},\n\tcompareDates : (date1, date2) => {\n\t\treturn (date1.getMonth() === date2.getMonth() && date1.getFullYear() === date2.getFullYear() &&  date1.getDate() === date2.getDate()) ? true : false;\n\t}\n};\n\nclass LoginWindow extends React.Component {   \n\trender() { \n\t\treturn (\n\t\t   \t<div className=\"username\">\n\t\t   \t<h1>Введите имя</h1>\n\t\t   \t<input type=\"text\" id='nickname' onKeyUp={(e) => this.props.checkEnterKey(e)} />\n\t\t   \t<p className='userWarning' >{this.props.error}</p>\n\t\t   \t</div>\n\t\t);\n\t} \n}\n\nclass LoginApp extends React.Component {\n\tstate = {\n\t\terror : ''\n\t}\n\t\n\tcheckEnterKey = (e, val) => {\n\t\tvar value = e.target.value.replace(/ /g, \"\");\n\t\tif(helperFunctions.isEmptyValue(value)){\n\t\t\tthis.incorrectLogin();\n\t\t\treturn;\n\t\t}\n\t\tthis.clearError();\n\t\tif(!helperFunctions.isEnterButton(e))\n\t\t\treturn;\n\t\tthis.sendLogin(value);\n\t}\n\n\tsendLogin = (val) => {\n\t\tsocket.emit('userName', {'user': val});\n\t}\n\n\texistLogin = () => {\n\t\tthis.setErrorStateFun('Такой пользователь уже есть');\n\t}\n\n\tincorrectLogin = () => {\n\t\tthis.setErrorStateFun('Недопустимое имя');\n\t}\n\n\tclearError = () => {\n\t\tthis.setErrorStateFun('');\n\t}\n\n\tsetErrorStateFun = (val) => {\n\t\tthis.setState({\n\t\t\terror : val\n\t\t})\n\t}\n\n\trender() {\n\t\treturn <LoginWindow error={this.state.error} checkEnterKey={this.checkEnterKey} />;\n\t}\n\n\tcomponentWillMount() {\n        socket.on('existUsername', () => {\n            this.existLogin();\n        });\n        socket.on('incorrectUsername', () => {\n            this.incorrectLogin();\n        });\n    }\n}\n\nclass ChatContainer extends React.Component { \n\tstate = {\n\t\tusersList : {},\n\t\tuid : 0,\n\t\tmidEdit : -1,\n\t\tmessage : ''\n\t}\n\n\tsetEditMessage (mid, message){\n\t\tthis.setState({\n\t\t\tmidEdit : mid,\n\t\t\tmessage : message\n\t\t});\n\t}\n\n\tsetUsers (users) {\n\t\tthis.setState({\n\t\t\tusersList : users\n\t\t});\n\t}\n\n\tsetUid (uid) {\n\t\tthis.setState({\n\t\t\tuid : uid\n\t\t});\n\t}\n\n\tmessageEdited = (mid = -1, message = '') => {\n\t\tthis.setEditMessage(mid, message);\n\t}\n\n\trender() { \n\t\treturn (\n\t\t<section id='chatSection'>\n\t\t\t<Chat uid={this.state.uid} usersList={this.state.usersList} editMessage={this.messageEdited} edditingMessage={this.state.midEdit} />\n\t\t\t<UserTyping uid={this.state.uid} usersList={this.state.usersList}/>\n\t\t\t<MessageForm editMessage={this.state.message} midEdit={this.state.midEdit} messageEdited={this.messageEdited} />\n\t\t\t<UsersInfo usersList={this.state.usersList}/>\n\t\t</section>\n\t\t);\n\t} \n\n\tcomponentWillMount() {\n\t\tsocket.on('chatHistory', (data) => {\n\t\t\tthis.setUsers(data.userList);\n\t\t});\n\t\tsocket.on('userLoggedIn', (data) => {\n\t\t\tthis.setUid(data.uid);\n\t\t});\n\t\tsocket.on('toggleOnline', (data) => {\n\t\t\tthis.setUsers(data.usersList);\n\t\t});\n\t\tsocket.on('chatNewUser', (data) => {\n\t\t\tvar users = this.state.usersList;\n\t\t\tusers[data.uid] = data.user;\n\t\t\tthis.setUsers(users);\n\t\t});\n    }\n\n}\n\nclass Chat extends React.Component { \n\tstate = {\n\t\tchatHistory : {},\n\t}\n\n\tlastReadMessage = 0; \n\n\tsetHistory (history) {\n\t\tthis.setState({\n\t\t\tchatHistory : history\n\t\t});\n\t}\n\n\tscrollToBottom = () => {\n\t\tvar list = document.getElementById(\"chat\");\n\t\tlist.scrollTop = list.scrollHeight;\n\t}\n\n\teditMessage = (mid) => {\n\t\tif(mid === '' || mid === this.props.edditingMessage){\n\t\t\tthis.props.editMessage(-1, '');\n\t\t\treturn;\n\t\t}\n\t\tthis.props.editMessage(mid, this.state.chatHistory[mid]['msg']);\n\t}\n\n\trender() { \n\t\tlet date = '';\n\t\treturn (\n\t\t    <div id=\"chat\">\n\t\t\t\t{Object.keys(this.state.chatHistory).map(i => {\n\t\t\t\t\tlet userChanged = false,\n\t\t\t\t\t\tdateChanged = false;\n\n\t\t\t\t\tif(date !== helperFunctions.parseDate(this.state.chatHistory[i]['date'])){\n\t\t\t\t\t\tdate = helperFunctions.parseDate(this.state.chatHistory[i]['date']);\n\t\t\t\t\t\tdateChanged = true;\n\t\t\t\t\t}\n\t\t\t\t\tif(this.lastMessageUid !== this.state.chatHistory[i]['user']){\n\t\t\t\t\t\tthis.lastMessageUid = this.state.chatHistory[i]['user'];\n\t\t\t\t\t\tuserChanged = true;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn [\n\t\t\t\t\t\t(dateChanged === true) ?  \n\t\t\t\t\t\t<div className=\"newUser dateMessage\">{date}</div>\n\t\t\t\t\t \t: '',\n\t\t\t\t\t\t(this.state.chatHistory[i]['isSystem'] === true) ?\n\t\t\t\t\t\t<SystemMessage message={this.state.chatHistory[i]} /> :\n\t\t\t\t\t\t<MessageItem message={this.state.chatHistory[i]} userChanged={userChanged} userName={(userChanged === true) ? this.props.usersList[this.lastMessageUid]['name'] : ''}  userColor={(userChanged === true) ? this.props.usersList[this.lastMessageUid]['color'] : ''} uid={this.props.uid} editMessage={this.editMessage} mid={i} isEdditing={this.props.edditingMessage === i ? true : false} />\n\t\t\t\t\t]\n\t\t\t\t\t\n\t\t\t\t})}\n\t\t\t</div>\n\t\t);\n\t} \n\n\tcomponentWillMount() {\n\t\tsocket.on('chatHistory', (data) => {\n\t\t\tthis.setHistory(data.chat);\n\t\t});\n\t\tsocket.on('rewriteMessage', (data) => {\n\t\t\tvar changeMessage = this.state.chatHistory;\n\t\t\tchangeMessage[data.mid] = data.message;\n\t\t\tthis.setHistory(changeMessage);\n\t\t});\n\t\tsocket.on('addMessage', (data) => {\n\t\t\tvar newMessage = this.state.chatHistory;\n\t\t\tnewMessage[data.id] = data.message;\n\t\t\tthis.setHistory(newMessage);\n\t\t});\n\t\tsocket.on('readAll', (data) => {\n\t\t\tvar messages = this.state.chatHistory;\n\t\t\tfor(let i = this.lastReadMessage; i<= data.toMessage; i++){\n\t\t\t\tmessages[i]['unread'] = false;\n\t\t\t}\n\t\t\tthis.setHistory(messages);\n\t\t\tthis.lastReadMessage = data.toMessage;\n\t\t});\n    }\n\n    componentDidUpdate() {\n\t\tthis.scrollToBottom();\n\t}\n}\n\nclass SystemMessage extends React.Component {\n\trender() { \n\t\treturn (\n\t\t    <div className=\"newUser\">{this.props.message['msg']}</div>\n\t\t)\n\t}\n}\n\nclass MessageItem extends React.Component {\n\trender() { \n\t\tlet unread = (this.props.message['unread'] === true ? 'unreadMessages ' : '');\n\t\tlet editting = (this.props.isEdditing === true ? 'editingMessage' : '');\n\t\tlet messageClass = \"message_container \" + (this.props.message['isChanged'] === true ? 'editedMsg ' : '') + unread + ' ' + editting;\n\t\tlet userMessageClass = \"message_container \"+unread;\n\t\treturn (\n\t\t    <div>\n\t\t\t\t{(this.props.userChanged === true) ?  \n\t\t\t\t\t<div className={userMessageClass}>\n\t\t\t\t\t\t<div className=\"date_name\">{helperFunctions.parseTime(this.props.message['date'])}\n\t\t\t\t\t\t\t<p className=\"user\" style={{'color' : this.props.userColor}} >{this.props.userName}</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t : '' }\n\t\t\t    <div className={messageClass}>\n\t\t\t    <Linkify tagName=\"p\" className=\"message\" onClick={() => this.props.editMessage(this.props.uid === this.props.message['user'] ? this.props.mid : '')}>{this.props.message['msg']}</Linkify>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nclass UsersInfo extends React.Component { \n\tstate = {\n\t\tcount : 0,\n\t}\n\n\trender() { \n\t\treturn (\n\t\t    <div>\n\t\t    \t<div id=\"users_count\">В чате {this.state.count} пользовате{helperFunctions.numericEnding(this.state.count, 'ль', 'ля', 'лей')}.</div>\n\t\t\t\t<div className=\"userList\">\n\t\t\t\t    {Object.keys(this.props.usersList).map(i => (\n\t\t\t\t    \t(this.props.usersList[i]['inChat'] === false ) ? '' : \n\t\t\t\t\t\t<p key={i} className={this.props.usersList[i]['online'] === true ? 'user_online' : 'user_gone'} >{this.props.usersList[i]['name']}</p>\n\t\t\t\t\t))}\n\n\t\t\t\t</div>\n\t\t    </div>\n\t\t);\n\t} \n\n\tsetCount (count) {\n\t\tthis.setState({\n\t\t\tcount : count\n\t\t});\n\t}\n\n\tcomponentWillMount() {\n\t\tsocket.on('chatHistory', (data) => {\n\t\t\tthis.setCount(data.users);\n\t\t});\n\t\tsocket.on('usersCount', (data) => {\n\t\t\tthis.setCount(data);\n\t\t});\n    }\n}\n\nclass UserTyping extends React.Component { \n\tstate = {\n\t\ttext : '',\n\t}\n\n\trender() { \n\t\treturn (\n\t\t    <p id='usersTyping'>{this.state.text}</p>\n\t\t);\n\t} \n\n\tcomponentWillMount() {\n\t\tsocket.on( 'usersTyping', (data) => {\n\t\t\tthis.setState({\n\t\t\t\ttext : ( (data.users.length === 0) ? '' : data.users.join(', ')+' печата'+(data.users.length > 1 ? 'ют' : 'ет')+' сообщение:')\n\t\t\t});\n\t\t})\n    }\n}\n\n\nclass MessageForm extends React.Component { \n\tisTyping = false;\n\tintervalStopTyping = '';\n\tstate = {\n\t\tmessage : ''\n\t}\n\n\thandleChange(event) {\n\t\tthis.setState({message: event.target.value})\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\t\n\t\tthis.setState({message: nextProps.editMessage})\n\t}\n\n\trender() { \n\t\treturn (\n\t\t    <div className=\"form-group\">\n\t\t\t\t<textarea className=\"form-control\" rows=\"3\" value={this.state.message} onKeyDown={(e) => this.keyPress(e)} ref=\"form-control\" onChange={(event) => this.handleChange(event)} />\n\t\t\t</div>\n\t\t);\n\t} \n\n\tkeyPress = (e) => {\n\t\tif(helperFunctions.isEnterCtrlButton(e)){\n\t\t\te.target.value += '\\r\\n';\n\t\t\treturn;\n\t\t}\n\t\tif(helperFunctions.isEnterButton(e)){\n\t\t\te.preventDefault();\n\t\t\tsocket.emit('addMessage', {'message': e.target.value, mid : this.props.midEdit});\n\t\t\tthis.setState({message: ''})\n\t\t\tthis.props.messageEdited(-1, '');\n\t\t\treturn;\n\t\t}\n\t\tclearTimeout(this.intervalStopTyping);\n\t\tthis.intervalStopTyping = setTimeout(this.stopTyping, 1000);\n\t\tif(this.isTyping === true)\n\t\t\treturn;\n\t\tsocket.emit('userTyping');\n\t\tthis.isTyping = true;\n\t}\n\n\tstopTyping = () => {\n\t\tsocket.emit('userStopTyping');\n\t\tthis.isTyping = false;\n\t}\n\n}\n\nclass Audio extends React.Component {   \n\trender() { \n\t\treturn (\n\t\t   \t<audio id=\"chatAudio\">\n\t\t\t   \t<source src=\"/src/notify.ogg\" type=\"audio/ogg\" />\n\t\t\t   \t<source src=\"/src/notify.mp3\" type=\"audio/mpeg\" />\n\t\t\t   \t<source src=\"/src/notify.wav\" type=\"audio/wav\" />\n\t\t   \t</audio>\n\t\t);\n\t} \n}\n\n\nclass App extends React.Component {\n\tstate = {\n\t\tisUserSiggedIn : false,\n\t\tisWindowOnFocus : true,\n\t\tuid : -1\n\t}\n\n\trender() {\n\t\treturn (\n\t\t        <div>\n\t\t        \t<ChatContainer uid={this.state.uid} />\n\t\t        \t{(this.state.isUserSiggedIn === false) ? <LoginApp /> : ''}\n\t\t        \t{(this.state.isWindowOnFocus === false) ? <Audio /> : ''}\n\t\t        </div>\n\t\t        );\n\t}\n\n\tsetUserStatus = (val) => {\n\t\tthis.setState({\n\t\t\tisUserSiggedIn : val\n\t\t});\n\t}\n\n\tsetWindowFocus = (val) => {\n\t\tthis.setState({\n\t\t\tisWindowOnFocus : val\n\t\t});\n\t}\n\n\treadAll = () => {\n\t\tif(this.state.isUserSiggedIn === true && this.state.isWindowOnFocus === true)\n\t\t\tsocket.emit('readAll');\n\t}\n\n\tcomponentWillMount() {\n\t\tsocket.on('loginUser', (data) => {\n\t\t\tthis.setUserStatus(false);\n\t\t});\n\t\tsocket.on('addMessage', (data) => {\n\t\t\tthis.readAll();\n\t\t\tif(this.state.isUserSiggedIn === true && this.state.isWindowOnFocus === false)\n\t\t\t\tdocument.getElementById('chatAudio').play();\n\t\t});\n\t\tsocket.on('userLoggedIn', (data) => {\n\t\t\tthis.setUserStatus(true);\n\t\t});\n\t\tsocket.on('returnUsername', (data) => {\n\t\t\tthis.setUserStatus(true);\n\t\t\tthis.setUid(data.uid);\n\t\t});\n\t\tsocket.on('disconnect', () => {\n\t\t\tthis.setUserStatus(false);\n\t\t});\n\t\twindow.addEventListener(\"focus\", (event) => {\n\t\t\tthis.setWindowFocus(true);\n\t\t\tsocket.emit('toggleOnline');\n\t\t\tthis.readAll();\n\t\t})\n\t\twindow.addEventListener(\"blur\", (event) => {\n\t\t\tthis.setWindowFocus(false);\n\t\t\tsocket.emit('toggleOnline');\n\t\t})\n    }\n\t\n}\n\nReactDOM.render(\n\t<App />, appSection\n)"],"sourceRoot":""}